# サーバー構築

> HTTPとHTTPSが何の略か調べ、それぞれが利用しているポートを調べて、どのような役割を持っているか50文字以上でまとめよう。

## HTTP
HTTPは**Hypertext Transfer Protocol**の略で、デフォルトでは80番ポートを使う、

WebブラウザとWebサーバ間の転送で用いられる通信プロトコルです。

セキュアな通信は行わないので、フォームを扱うページに使うのは推奨されません。

というよりHTTPのメリットは他のHTTPプロトコルを使用している（古い）ページとの通信ができることと

導入費用がかからないことなので、ちゃんとしたページを公開するならSSL化してHTTPSにした方が良いです。

##
HTTPSは**Hypertext Transfer Protocol Secure**の略で、デフォルトでは443番ポートを使う、

HTTP同様WebブラウザとWebサーバ間の転送で用いられる通信プロトコルです。

HTTPとの違いは通信内容が暗号化されるかどうかで、HTTPSは暗号化してデータを転送します。

少し前まではフォームがあるページなどだけにSSL化してHTTPSとしていましたが、

現在は全ページをSSL化する動きになっています。

> リダイレクトとリライトの違いを調べ、どんなことが出来るか書き出してみましょう。

## リダイレクト
リダイレクトはページ遷移時にURLが書き換えが発生します。

主な用途はWebサイト移行などに伴うURL遷移です。

主にドメインの移行で、新ドメインの方に誘導したいときなどに使います。

また、URLにつくwwwの有無やindex.htmlの有無など、異なるURLから

同じコンテンツのページを移動させるなどのときにも使用します。

リダイレクトがあるページにアクセスすると、一度サーバから「こっちのURLにアクセスしてね」という

情報が送られてくるので、ブラウザではそのURLにアクセスします。

つまりはページ遷移したという情報がブラウザ側に残るのがリダイレクトです。

## リライト
リライトはURLの書き換えを行わずに目的のURLのページを表示します。

別なURLのアクセスで同じコンテンツを見せることが可能な手法です。

ブラウザからアクセスすると、サーバ側では目的のファイルを読み込み、ブラウザへと返します。

リダイレクトと違い、リライトは遷移したという情報が残りません。

> RDBMSとKVSが何の略かを調べ、メリット・デメリットを50文字以上でまとめよう。

## RDBMS
RDBMSは**Relational DataBase Management System**の略で

その名の通りリレーショナルデータベースを管理するシステムのことです。
一般的にSQLを使ってデータベースとのやりとりを行います。

- メリット
RDBは表形式でデータを扱うので、複雑のデータ構造でも対応できます。
また、RDBはトランザクションによって関連する処理を一まとまりで扱えるので、
同時に処理が行われることを防ぐことが可能です。
- デメリット
データベースがあまり複雑な構造になりすぎるとデータ参照時に遅くなるなどの
データベースの性能を十分に発揮できなくなります。

## KVS
KVSは**Key Value Store**の略で、NoSQL（Not only SQL）の一つです。

- メリット
NoSQL系は単純なデータ構造の取扱に向いているので、
データ数が多いものに関する扱いが向いています。
ログデータ系など大量にデータを格納し、必要に応じて参照するという
シンプルさにより、高速にデータにアクセスすることができます。
- デメリット
複雑なデータ構造には向いていません。
また、整合性をとりながら処理することに不向きなので更新や削除にも向きません。

> Linuxでは、ext3やXFSを使う場面が多いです。この2つのファイルシステムのメリット・デメリットを調べ、自分ならどちらを使うか理由をつけて書いてください。

## ext3

- メリット
root用に容量を保管してあるので、仮に最大まで容量を使ってもrootで作業（メンテナンス）できるようになっています。
また、ext2からの追加として、ジャーナルという異常終了時にファイルシステムが破損しないような機能が追加されました。
- デメリット
日付対応が2038年1月18日までしかされていません。また、ファイルの不整合修正ツールがあまり性能がよくなさそう。

## XFS

-メリット
ファイルの読み書きが早いのでSSDとの相性が良いです。
- デメリット
速度が早い分メモリ消費が多いです。

## どちらを選ぶか

ext4が比較に入っていればext4を選びますが、ext3とXFSならXFSを選びます。

現状古めのPCを使わない限りディスク容量使い切ることもないですし、

パフォーマンス的にもext3である必要性はないかなと。

> swapとは逆に、tmpfsやramdiskといった、主記憶装置を補助記憶装置として扱える仕組みがあります。メリットとデメリットを調べ、どのような機能のどのような場面で使うと効果的か書いてみましょう。

電源を切らない限りは保存されているので、たとえばデータ処理中の一時退避ファイルや

開発中の一時的なエラーログ置き場などとして活用することが効果的です。

また、よくHDDやSSDにアクセスするものを作業中はそちらに変え、

一定時間ごとにHDDやSSDにバックアップを取るようなことをすると

速度的にパフォーマンスが高く処理できます。

> サーバの種類を４つ以上あげて特徴と役割をまとめよう。（50文字以上）

## Webサーバ

Webページを表示するためのサーバです。

単純な機能としてはブラウザから来たリクエストに合うファイルなどをブラウザに返します。

場合によってはサーバ側で処理をした上でデータを返したりもします。

## ファイルサーバ

ネットワーク上でファイルを保存したり共有したりするサーバです。

会社内や学校内などクローズドで立てることもあれば、

外からでもファイルにアクセスできるようにオープンで立てることもあります。

## メールサーバ

メールの送受信を担うサーバです。

送信と受信で設定が分かれていて、送信を担うサーバはSMTPサーバ、

受信を担うサーバはPOP3サーバ、IMAPサーバと呼びます。

POP3サーバは端末が受信できる状態の時にPOP3サーバに蓄積していたメールを

ローカルにとってくる手法です。

IMAPサーバは受信したメールをサーバ上で扱うので、複数端末で

同じメールを見れるようになり、既読管理も共有化できます。

## データベースサーバ

文字通りデータベースを置いて可動させているサーバです。

一般的に他のサーバと共存させず、データベース単体で可動させているサーバのことを言います。

大規模なシステムになると、負荷分散させるために各役割ごとにサーバを分けます。

そのうちデータベースサーバは受け取ったリクエストに対してデータベースに格納したり

更新したり削除したりなどを行った結果を返します。

> LinuxのOSのログファイルには、どんなものがあるか、リストアップし、どんな内容が記載されているか、まとめてみましょう。

基本的にLinuxのログは`/var/log/`以下に保存されますが、アプリによってはアプリディレクトリ内に保存されている場合もあります。

めんどくさいので内容に関しては概略だけ。

- cron.log
定期実行を行うcronのログが記録されます。
- wtmp
ログイン成功したログが記録されます。
- btmp
ログイン失敗のログが記録され、rootのみ閲覧できます。
- maillog
メールシステム系のログが記録されます。
- boot.log
システム起動時のログが出力されます。

> Linuxのコマンドを使ってPHPをインストールしてみましょう。

`yum -y install php`

> Linuxのコマンドを使ってMySQLをインストールしてみましょう。

`yum -y install mysql`

> Linuxのコマンドを使って上記以外のミドルウェア及びソフトウェアを2つ以上インストールしてみましょう。

`yum -y install nkf`

`yum -y install ruby`